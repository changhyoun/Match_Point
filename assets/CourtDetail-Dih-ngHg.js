import{u as $,j as t,L as q,r as f,a as z}from"./index-ChaL_YzH.js";import{T as K}from"./TennisCourt-data-B9QlW217.js";import{e as U,c as J,m as j,S as V,A as X,a as Z}from"./autoplay-us6sHPrP.js";import{B as G}from"./BackArrow-C9NZQOc3.js";import{F as Q}from"./Footer-CRyQtqGU.js";import{k as W}from"./keys-BDgxFxzE.js";import{D as H,a as O,f as T,s as R}from"./react-datepicker-VK1bu4FA.js";import{f as Y}from"./find_account_check-DsNFd0sP.js";const ee="/Match_Point/assets/court_logo_white-DFsVZ-Xj.svg",te="/Match_Point/assets/kakao_location-FaMvOrun.svg";function se(x,e,v,r){return x.params.createElements&&Object.keys(r).forEach(n=>{if(!v[n]&&v.auto===!0){let u=U(x.el,`.${r[n]}`)[0];u||(u=J("div",r[n]),u.className=r[n],x.el.append(u)),v[n]=u,e[n]=u}}),v}function ae(x){let{swiper:e,extendParams:v,on:r,emit:n}=x;v({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function u(s){let a;return s&&typeof s=="string"&&e.isElement&&(a=e.el.querySelector(s),a)?a:(s&&(typeof s=="string"&&(a=[...document.querySelectorAll(s)]),e.params.uniqueNavElements&&typeof s=="string"&&a&&a.length>1&&e.el.querySelectorAll(s).length===1?a=e.el.querySelector(s):a&&a.length===1&&(a=a[0])),s&&!a?s:a)}function m(s,a){const d=e.params.navigation;s=j(s),s.forEach(c=>{c&&(c.classList[a?"add":"remove"](...d.disabledClass.split(" ")),c.tagName==="BUTTON"&&(c.disabled=a),e.params.watchOverflow&&e.enabled&&c.classList[e.isLocked?"add":"remove"](d.lockClass))})}function h(){const{nextEl:s,prevEl:a}=e.navigation;if(e.params.loop){m(a,!1),m(s,!1);return}m(a,e.isBeginning&&!e.params.rewind),m(s,e.isEnd&&!e.params.rewind)}function w(s){s.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),n("navigationPrev"))}function C(s){s.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),n("navigationNext"))}function l(){const s=e.params.navigation;if(e.params.navigation=se(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(s.nextEl||s.prevEl))return;let a=u(s.nextEl),d=u(s.prevEl);Object.assign(e.navigation,{nextEl:a,prevEl:d}),a=j(a),d=j(d);const c=(p,y)=>{p&&p.addEventListener("click",y==="next"?C:w),!e.enabled&&p&&p.classList.add(...s.lockClass.split(" "))};a.forEach(p=>c(p,"next")),d.forEach(p=>c(p,"prev"))}function o(){let{nextEl:s,prevEl:a}=e.navigation;s=j(s),a=j(a);const d=(c,p)=>{c.removeEventListener("click",p==="next"?C:w),c.classList.remove(...e.params.navigation.disabledClass.split(" "))};s.forEach(c=>d(c,"next")),a.forEach(c=>d(c,"prev"))}r("init",()=>{e.params.navigation.enabled===!1?k():(l(),h())}),r("toEdge fromEdge lock unlock",()=>{h()}),r("destroy",()=>{o()}),r("enable disable",()=>{let{nextEl:s,prevEl:a}=e.navigation;if(s=j(s),a=j(a),e.enabled){h();return}[...s,...a].filter(d=>!!d).forEach(d=>d.classList.add(e.params.navigation.lockClass))}),r("click",(s,a)=>{let{nextEl:d,prevEl:c}=e.navigation;d=j(d),c=j(c);const p=a.target;let y=c.includes(p)||d.includes(p);if(e.isElement&&!y){const E=a.path||a.composedPath&&a.composedPath();E&&(y=E.find(_=>d.includes(_)||c.includes(_)))}if(e.params.navigation.hideOnClick&&!y){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===p||e.pagination.el.contains(p)))return;let E;d.length?E=d[0].classList.contains(e.params.navigation.hiddenClass):c.length&&(E=c[0].classList.contains(e.params.navigation.hiddenClass)),n(E===!0?"navigationShow":"navigationHide"),[...d,...c].filter(_=>!!_).forEach(_=>_.classList.toggle(e.params.navigation.hiddenClass))}});const b=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),l(),h()},k=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),o()};Object.assign(e.navigation,{enable:b,disable:k,update:h,init:l,destroy:o})}function ne(){return $(),t.jsxs("div",{id:"CourtDetail_header",children:[t.jsx(q,{to:"/All_Court",children:t.jsx(G,{})}),t.jsx("img",{src:ee,alt:"logo_white"}),t.jsx("p",{})]})}const ie=({latitude:x,longitude:e})=>(f.useEffect(()=>(new Promise((r,n)=>{if(window.kakao&&window.kakao.maps){r(window.kakao);return}const u=document.createElement("script");u.src=`https://dapi.kakao.com/v2/maps/sdk.js?appkey=${W.kakaoJavApiKey}&autoload=false`,u.async=!0,u.onload=()=>r(window.kakao),u.onerror=n,document.head.appendChild(u)}).then(r=>{r.maps.load(()=>{const n=document.getElementById("map"),u={center:new r.maps.LatLng(x,e),level:3},m=new r.maps.Map(n,u),h=new r.maps.MarkerImage(te,new r.maps.Size(60,60),{offset:new r.maps.Point(15,15)}),w=new r.maps.LatLng(x,e);new r.maps.Marker({position:w,image:h}).setMap(m);const l=document.createElement("button");l.innerHTML="✚",l.style.position="absolute",l.style.backgroundColor="white",l.style.boxShadow="1px 1px 1px rgba(0, 0, 0, 0.15)",l.style.textShadow="1px 1px 1px rgba(0, 0, 0, 0.15)",l.style.color="#77B850",l.style.padding="3px 5px",l.style.border="none",l.style.top="10px",l.style.left="10px",l.style.cursor="pointer",l.style.zIndex="100",l.style.outline="none",l.style.width="25px",l.style.height="25px",l.style.display="flex",l.style.alignItems="center",l.style.justifyContent="center",l.style.borderRadius="50%",l.onclick=()=>{const b=m.getLevel()-1;b>=1&&m.setLevel(b)},n.appendChild(l);const o=document.createElement("button");o.innerHTML="⚊",o.style.position="absolute",o.style.backgroundColor="white",o.style.border="none",o.style.boxShadow="1px 1px 1px rgba(0, 0, 0, 0.15)",o.style.textShadow="1px 1px 1px rgba(0, 0, 0, 0.15)",o.style.color="#77B850",o.style.borderRadius="50%",o.style.padding="3px 5px",o.style.top="50px",o.style.left="10px",o.style.cursor="pointer",o.style.outline="none",o.style.zIndex="100",o.style.width="25px",o.style.height="25px",o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="center",o.onclick=()=>{const b=m.getLevel()+1;b<=9&&m.setLevel(b)},n.appendChild(o)})}).catch(r=>{console.error("Failed to load Kakao Map script",r)}),()=>{const r=document.querySelector('script[src*="dapi.kakao.com/v2/maps/sdk.js"]');r&&r.remove()}),[x,e]),t.jsx("div",{id:"map",style:{position:"relative"}}));function he(){const{id:x}=z(),e=K.find(i=>i.id===x),[v,r]=f.useState(!1),[n,u]=f.useState(null),[m,h]=f.useState(null),[w,C]=f.useState(!1),[l,o]=f.useState(""),[b,k]=f.useState(""),[s,a]=f.useState({});f.useEffect(()=>{if(w){const i=document.querySelector(".CourtDetail_main_reservation_suc img");i&&(i.style.transform="scale(1)")}},[w]),f.useEffect(()=>{const i=JSON.parse(localStorage.getItem("reservation_data"))||{};a(i)},[]);const d=()=>{r(!0)},c=()=>{r(!1)},p=new Date;p.setHours(6,0);const y=new Date;y.setHours(22,0);const E=()=>{if(!n)return p;const i=new Date(n);return i.getHours()<6&&i.setHours(6,0),i},_=i=>{u(i),m&&i>=m&&h(null)},P=i=>{n&&R(n).getTime()!==R(i).getTime()?(alert("동일한 날에만 예약할 수 있습니다."),h(null)):n&&n>=i?(alert("예약 시간은 최소 1시간입니다."),h(null)):h(i)},B=(i,g,D)=>(s[i]||[]).find(S=>{const I=new Date(S.startTime),M=new Date(S.endTime);return g>=I&&g<M||D>I&&D<=M||g<=I&&D>=M}),F=()=>{if(!n||!m){alert("시작시간과 종료시간을 입력해주세요!");return}const i=JSON.parse(localStorage.getItem("currentUser")),g=i.id,D={courtName:e.name,userName:i.name,userPhone:i.phoneNumber,startTime:n.toISOString(),endTime:m.toISOString(),main_img:e.main_img},L=B(g,n,m);if(L){alert(`${i.name}님은 해당 시간대에 이미 ${L.courtName}에 예약이 되어있습니다.`);return}const S={...s,[g]:[...s[g]||[],D]};localStorage.setItem("reservation_data",JSON.stringify(S)),o(i.name),k(i.phoneNumber),C(!0)},A=()=>{window.location.reload()},N=[e.img1,e.img2,e.img3].filter(i=>i);return t.jsxs("div",{className:"CourtDetail",children:[t.jsx(ne,{}),t.jsx("div",{className:"CourtDetail_header_2",children:t.jsx("h3",{children:e.name})}),t.jsxs("div",{className:`CourtDetail_main ${v?"blurred":""}`,children:[t.jsx("div",{className:"CourtDetail_main_slide",children:t.jsxs(V,{modules:[X,ae],spaceBetween:50,slidesPerView:1,pagination:{clickable:!0},autoplay:{delay:3e3,disableOnInteraction:!1},navigation:N.length>1?{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}:!1,children:[N.map((i,g)=>t.jsx(Z,{children:t.jsx("img",{src:i,alt:`Image ${g+1}`})},g)),N.length>1&&t.jsxs("div",{className:"swiper-button_warp",children:[t.jsx("div",{className:"swiper-button-next next1",children:t.jsx("span",{class:"material-symbols-rounded",children:"swipe_left"})}),t.jsx("div",{className:"swiper-button-prev prev1",children:t.jsx("span",{class:"material-symbols-rounded",children:"swipe_left"})})]})]})}),t.jsxs("div",{className:"CourtDetail_main_warp",children:[t.jsxs("div",{className:"CourtDetail_main_box1",children:[t.jsx("h4",{children:e.name}),t.jsxs("p",{children:["주소 : ",e.address]})]}),t.jsx("button",{className:"CourtDetail_main_box2",onClick:d,children:"이 테니스장 예약하기"}),t.jsxs("div",{className:"CourtDetail_main_box3",children:[t.jsx("a",{className:"call",href:`tel:${e.call}`,children:t.jsx("span",{className:"material-symbols-rounded",children:"phone_forwarded"})}),t.jsx("h4",{children:"테니스장 정보"}),t.jsxs("ul",{children:[t.jsxs("li",{children:["이용시간 : ",e.time]}),t.jsxs("li",{children:["코트 종류 : ",e.coatType]}),t.jsxs("li",{children:["코트 수 : ",e.courtNumber]}),t.jsxs("li",{children:["가격 : ",e.price]})]})]}),t.jsxs("div",{className:"CourtDetail_main_box4",children:[t.jsx("h4",{children:"위치 정보"}),t.jsxs("ul",{children:[t.jsxs("li",{children:["테니스장 명 : ",e.name]}),t.jsxs("li",{children:["주소 : ",e.address]})]}),t.jsx(ie,{latitude:e.latitude,longitude:e.longitude})]})]})]}),t.jsxs("div",{className:`CourtDetail_main_reservation ${v?"open":""}`,children:[t.jsx("h4",{children:e.name}),t.jsx("p",{children:"예약 날짜와 시간을 선택하세요."}),t.jsxs("div",{className:"reservation_time",children:[t.jsxs("div",{className:"start_time",children:[t.jsx("span",{children:"시작 :"}),t.jsx(H,{selected:n,onChange:_,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:60,dateFormat:"yyyy/MM/dd HH:mm",timeCaption:"시간",minDate:new Date,maxDate:O(new Date,30),minTime:p,maxTime:y,selectsStart:!0,startDate:n,endDate:m,onFocus:i=>i.target.blur(),placeholderText:"날짜 및 시간 선택"}),!n&&t.jsx("p",{children:"시작시간을 입력해주세요❗"})]}),t.jsxs("div",{className:"end_time",children:[t.jsx("span",{children:"종료 :"}),t.jsx(H,{selected:m,onChange:P,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:60,dateFormat:"yyyy/MM/dd HH:mm",timeCaption:"시간",minDate:n||new Date,maxDate:O(new Date,30),minTime:n?E():p,maxTime:y,selectsEnd:!0,startDate:n,onFocus:i=>i.target.blur(),endDate:m,placeholderText:"날짜 및 시간 선택"}),!m&&t.jsx("p",{children:"종료시간을 입력해주세요❗"})]})]}),t.jsx("button",{className:"reser_btn",onClick:F,children:"예약하기"}),t.jsx("span",{className:"material-symbols-rounded CourtDetail_main_reservation_close",onClick:c,children:"close"})]}),w&&t.jsxs("div",{className:"CourtDetail_main_reservation_suc",children:[t.jsx("img",{src:Y,alt:"reservation_check"}),t.jsxs("h4",{children:[l,"님 ",e.name,t.jsx("br",{}),"예약 완료되었습니다."]}),t.jsxs("div",{className:"reservation_suc_time",children:[t.jsx("span",{children:"예약시간"}),t.jsxs("p",{children:[T(new Date(n),"yyyy.MM.dd HH:mm")," ~ ",T(new Date(m),"HH:mm"),t.jsx("br",{})," ",t.jsxs("em",{children:["(",Math.abs(new Date(m)-new Date(n))/36e5,"시간)"]})]})]}),t.jsx("span",{class:"material-symbols-rounded cir_close",onClick:A,children:"cancel"})]}),t.jsx(Q,{})]})}export{he as default};
