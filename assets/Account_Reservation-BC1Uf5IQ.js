import{r as n,j as e}from"./index-DFTY--o6.js";import{L as F}from"./Logo_header-BWqmyU46.js";import{F as O}from"./Footer-BR-dON2d.js";import{f as J}from"./find_account_check-DsNFd0sP.js";import{f as L}from"./find_account_cancel-Dw7Uknn5.js";import{n as M}from"./not_reservation-BL7FqPPj.js";const S="/Match_Point/assets/reservation_time-1Q8x28fT.png",q="/Match_Point/assets/reservation_cancel_popup_img-CqA_7790.png";function K(){var w,N;const[d,x]=n.useState([]),[c,R]=n.useState(null),[p,_]=n.useState(!1),[j,k]=n.useState(!1),[u,C]=n.useState(null),[i,D]=n.useState("all"),[f,v]=n.useState(!1),h=n.useRef(null);n.useEffect(()=>{const s=JSON.parse(localStorage.getItem("currentUser"));if(R(s),s){const t=JSON.parse(localStorage.getItem("reservation_data"))||{};x(t[s.id]||[])}},[]);const m=s=>{const t=s.getFullYear(),a=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0"),l=s.getHours(),P=String(s.getMinutes()).padStart(2,"0"),E=l>=12?"오후":"오전",I=String(l%12||12).padStart(2,"0");return`${t}. ${a}. ${r}. ${E} ${I}:${P}`},b=s=>{C(s),_(!0)},T=()=>{const s=d.filter((a,r)=>r!==u);x(s);const t=JSON.parse(localStorage.getItem("reservation_data"))||{};t[c.id]=s,localStorage.setItem("reservation_data",JSON.stringify(t)),_(!1),k(!0)},A=()=>{_(!1)},$=()=>{window.location.reload()},o=s=>{D(s),v(!1)},g=(()=>{let s=[...d];const t=new Date;switch(i){case"latest":s.sort((a,r)=>new Date(r.startTime)-new Date(a.startTime));break;case"oldest":s.sort((a,r)=>new Date(a.startTime)-new Date(r.startTime));break;case"past":s=s.filter(a=>new Date(a.endTime)<t);break;case"upcoming":s=s.filter(a=>new Date(a.endTime)>=t);break}return s})(),y=()=>{v(s=>!s)};return n.useEffect(()=>{const s=t=>{h.current&&!h.current.contains(t.target)&&v(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),n.useEffect(()=>{const s=document.querySelector(".reservation_cancel_popup .reservation_cancel_popup_warp img");p&&(s.style.transform="rotateY(0)")}),n.useEffect(()=>{const s=document.querySelector(".reservation_cancel_sure_popup img");j&&(s.style.transform="scale(1)")}),e.jsxs("div",{id:"Account_Reservation",children:[e.jsx(F,{}),e.jsx("div",{className:"Account_Reservation_hd",children:e.jsx("div",{className:"Account_Reservation_hd_warp",children:e.jsx("h3",{children:"예약 내역"})})}),e.jsx("div",{className:`reservation_cancel_popup ${p?"active":""}`,children:e.jsxs("div",{className:"reservation_cancel_popup_warp",children:[e.jsxs("h3",{children:[c&&c.name,"님, 예약을",e.jsx("br",{}),"취소 및 삭제 하시겠어요?"]}),e.jsxs("div",{className:"reservation_cancel_popup_time_warp",children:[e.jsxs("p",{children:["시작 시간: ",m(new Date((w=d[u])==null?void 0:w.startTime))]}),e.jsxs("p",{children:["종료 시간: ",m(new Date((N=d[u])==null?void 0:N.endTime))]})]}),e.jsx("img",{src:q,alt:"reservation_cancel_popup_img"}),e.jsxs("div",{className:"reservation_cancel_popup_btn_warp",children:[e.jsx("button",{className:"sure",onClick:T,children:"예약 취소 및 삭제"}),e.jsx("button",{className:"cancel",onClick:A,children:"닫기"})]})]})}),e.jsxs("div",{className:`reservation_cancel_sure_popup ${j?"active":""}`,children:[e.jsxs("h3",{children:["감사합니다",e.jsx("br",{}),"예약 취소 및 삭제 되었습니다."]}),e.jsx("img",{src:J,alt:"find_account_check"}),e.jsx("span",{className:"material-symbols-rounded",onClick:$,children:"cancel"})]}),e.jsx("div",{className:`Account_Reservation_main ${p?"no_active":""}`,children:e.jsxs("div",{className:"Account_Reservation_main_warp",children:[e.jsxs("div",{className:"Account_Reservation_main_filter",ref:h,children:[e.jsxs("div",{className:"filter_selected",onClick:y,children:[e.jsx("span",{children:i==="all"?"모두":i==="latest"?"최신순":i==="oldest"?"오랜된순":i==="past"?"기간이 지난 예약":"기간이 안지난 예약"}),e.jsx("span",{className:"arrow",children:e.jsx("span",{className:"material-symbols-rounded",children:f?"keyboard_arrow_up":"keyboard_arrow_down"})})]}),e.jsxs("div",{className:`filter_options ${f?"show":""}`,children:[e.jsx("div",{onClick:()=>o("all"),children:"모두"}),e.jsx("div",{onClick:()=>o("latest"),children:"최신순"}),e.jsx("div",{onClick:()=>o("oldest"),children:"오랜된순"}),e.jsx("div",{onClick:()=>o("past"),children:"기간이 지난 예약"}),e.jsx("div",{onClick:()=>o("upcoming"),children:"기간이 안지난 예약"})]})]}),c&&g.length>0?g.map((s,t)=>{const a=new Date(s.startTime),r=new Date(s.endTime),l=r<new Date;return e.jsxs("div",{className:"reservation_item reservation_items_all",children:[e.jsx("img",{className:"reservation_item_back",src:`${s.main_img}`,alt:`${s.main_img}`}),e.jsxs("div",{className:"reservation_details_warp",children:[e.jsxs("div",{className:"reservation_details_lt",children:[l&&e.jsx("span",{className:"past_reservation",children:"시간이 지난 예약이에요!"}),e.jsx("h3",{children:s.courtName}),e.jsxs("div",{className:"reservation_time",children:[e.jsxs("p",{children:["시작 시간: ",m(a)]}),e.jsxs("p",{children:["종료 시간: ",m(r)]})]}),e.jsx("div",{children:e.jsxs("button",{className:"cancel_reservation",onClick:()=>b(t),children:[e.jsx("img",{src:L,alt:"find_account_cancel"}),l?"삭제":"예약 취소"]})})]}),e.jsx("div",{className:"reservation_details_rt",children:e.jsx("img",{src:S,alt:S})})]})]},t)}):e.jsxs("div",{className:"not_reservation reservation_items_all",children:[e.jsx("img",{className:"not_reservation_img",src:M,alt:"not_reservation"}),e.jsxs("h3",{children:[c&&c.name,"님의 예약하신 내역이 없는거 같아요!"]}),e.jsx("p",{children:"하단에 코트를 클릭 후 예약을 진행해보세요!"})]})]})}),e.jsx(O,{})]})}export{K as default};
