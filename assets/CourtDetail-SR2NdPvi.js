import{u as A,j as t,L as $,r as g,a as z}from"./index-BMqCuyxL.js";import{T as U}from"./TennisCourt-data-B9QlW217.js";import{e as K,c as J,m as w,S as V,A as G,a as Q}from"./autoplay-B7UER2mS.js";import{l as W}from"./logo_white-B5PiaNox.js";import{B as X}from"./BackArrow-DX2OQgbn.js";import{F as Y}from"./Footer-CfbvLV-t.js";import{D as I,a as O,f as T,s as R}from"./react-datepicker-BF_go5g4.js";import{f as Z}from"./find_account_check-DsNFd0sP.js";const ee="/Match_Point/assets/kakao_location-FaMvOrun.svg";function te(x,e,v,r){return x.params.createElements&&Object.keys(r).forEach(n=>{if(!v[n]&&v.auto===!0){let u=K(x.el,`.${r[n]}`)[0];u||(u=J("div",r[n]),u.className=r[n],x.el.append(u)),v[n]=u,e[n]=u}}),v}function ae(x){let{swiper:e,extendParams:v,on:r,emit:n}=x;v({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function u(a){let s;return a&&typeof a=="string"&&e.isElement&&(s=e.el.querySelector(a),s)?s:(a&&(typeof a=="string"&&(s=[...document.querySelectorAll(a)]),e.params.uniqueNavElements&&typeof a=="string"&&s&&s.length>1&&e.el.querySelectorAll(a).length===1?s=e.el.querySelector(a):s&&s.length===1&&(s=s[0])),a&&!s?a:s)}function c(a,s){const l=e.params.navigation;a=w(a),a.forEach(o=>{o&&(o.classList[s?"add":"remove"](...l.disabledClass.split(" ")),o.tagName==="BUTTON"&&(o.disabled=s),e.params.watchOverflow&&e.enabled&&o.classList[e.isLocked?"add":"remove"](l.lockClass))})}function h(){const{nextEl:a,prevEl:s}=e.navigation;if(e.params.loop){c(s,!1),c(a,!1);return}c(s,e.isBeginning&&!e.params.rewind),c(a,e.isEnd&&!e.params.rewind)}function b(a){a.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),n("navigationPrev"))}function D(a){a.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),n("navigationNext"))}function d(){const a=e.params.navigation;if(e.params.navigation=te(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(a.nextEl||a.prevEl))return;let s=u(a.nextEl),l=u(a.prevEl);Object.assign(e.navigation,{nextEl:s,prevEl:l}),s=w(s),l=w(l);const o=(p,j)=>{p&&p.addEventListener("click",j==="next"?D:b),!e.enabled&&p&&p.classList.add(...a.lockClass.split(" "))};s.forEach(p=>o(p,"next")),l.forEach(p=>o(p,"prev"))}function m(){let{nextEl:a,prevEl:s}=e.navigation;a=w(a),s=w(s);const l=(o,p)=>{o.removeEventListener("click",p==="next"?D:b),o.classList.remove(...e.params.navigation.disabledClass.split(" "))};a.forEach(o=>l(o,"next")),s.forEach(o=>l(o,"prev"))}r("init",()=>{e.params.navigation.enabled===!1?S():(d(),h())}),r("toEdge fromEdge lock unlock",()=>{h()}),r("destroy",()=>{m()}),r("enable disable",()=>{let{nextEl:a,prevEl:s}=e.navigation;if(a=w(a),s=w(s),e.enabled){h();return}[...a,...s].filter(l=>!!l).forEach(l=>l.classList.add(e.params.navigation.lockClass))}),r("click",(a,s)=>{let{nextEl:l,prevEl:o}=e.navigation;l=w(l),o=w(o);const p=s.target;let j=o.includes(p)||l.includes(p);if(e.isElement&&!j){const E=s.path||s.composedPath&&s.composedPath();E&&(j=E.find(C=>l.includes(C)||o.includes(C)))}if(e.params.navigation.hideOnClick&&!j){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===p||e.pagination.el.contains(p)))return;let E;l.length?E=l[0].classList.contains(e.params.navigation.hiddenClass):o.length&&(E=o[0].classList.contains(e.params.navigation.hiddenClass)),n(E===!0?"navigationShow":"navigationHide"),[...l,...o].filter(C=>!!C).forEach(C=>C.classList.toggle(e.params.navigation.hiddenClass))}});const y=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),h()},S=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),m()};Object.assign(e.navigation,{enable:y,disable:S,update:h,init:d,destroy:m})}function se(){return A(),t.jsxs("div",{id:"CourtDetail_header",children:[t.jsx($,{to:"/All_Court",children:t.jsx(X,{})}),t.jsx("img",{src:W,alt:"logo_white"}),t.jsx("p",{})]})}const ne=({latitude:x,longitude:e})=>(g.useEffect(()=>(new Promise((r,n)=>{if(window.kakao&&window.kakao.maps){r(window.kakao);return}const u=document.createElement("script");u.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=8f4963338543d76b368aaf27283c8133&autoload=false",u.async=!0,u.onload=()=>r(window.kakao),u.onerror=n,document.head.appendChild(u)}).then(r=>{r.maps.load(()=>{const n=document.getElementById("map"),u={center:new r.maps.LatLng(x,e),level:3},c=new r.maps.Map(n,u),h=new r.maps.MarkerImage(ee,new r.maps.Size(60,60),{offset:new r.maps.Point(15,15)}),b=new r.maps.LatLng(x,e);new r.maps.Marker({position:b,image:h}).setMap(c);const d=document.createElement("button");d.innerHTML="✚",d.style.position="absolute",d.style.backgroundColor="white",d.style.boxShadow="1px 1px 1px rgba(0, 0, 0, 0.15)",d.style.textShadow="1px 1px 1px rgba(0, 0, 0, 0.15)",d.style.color="#77B850",d.style.padding="3px 5px",d.style.border="none",d.style.top="10px",d.style.left="10px",d.style.cursor="pointer",d.style.zIndex="100",d.style.outline="none",d.style.borderRadius="50%",d.onclick=()=>{const y=c.getLevel()-1;y>=1&&c.setLevel(y)},n.appendChild(d);const m=document.createElement("button");m.innerHTML="⚊",m.style.position="absolute",m.style.backgroundColor="white",m.style.border="none",m.style.boxShadow="1px 1px 1px rgba(0, 0, 0, 0.15)",m.style.textShadow="1px 1px 1px rgba(0, 0, 0, 0.15)",m.style.color="#77B850",m.style.borderRadius="50%",m.style.padding="3px 5px",m.style.top="50px",m.style.left="10px",m.style.cursor="pointer",m.style.outline="none",m.style.zIndex="100",m.onclick=()=>{const y=c.getLevel()+1;y<=9&&c.setLevel(y)},n.appendChild(m)})}).catch(r=>{console.error("Failed to load Kakao Map script",r)}),()=>{const r=document.querySelector('script[src*="dapi.kakao.com/v2/maps/sdk.js"]');r&&r.remove()}),[x,e]),t.jsx("div",{id:"map",style:{position:"relative"}}));function ue(){const{id:x}=z(),e=U.find(i=>i.id===x),[v,r]=g.useState(!1),[n,u]=g.useState(null),[c,h]=g.useState(null),[b,D]=g.useState(!1),[d,m]=g.useState(""),[y,S]=g.useState(""),[a,s]=g.useState({});g.useEffect(()=>{if(b){const i=document.querySelector(".CourtDetail_main_reservation_suc img");i&&(i.style.transform="scale(1)")}},[b]),g.useEffect(()=>{const i=JSON.parse(localStorage.getItem("reservation_data"))||{};s(i)},[]);const l=()=>{r(!0)},o=()=>{r(!1)},p=new Date;p.setHours(6,0);const j=new Date;j.setHours(22,0);const E=()=>{if(!n)return p;const i=new Date(n);return i.getHours()<6&&i.setHours(6,0),i},C=i=>{u(i),c&&i>=c&&h(null)},P=i=>{n&&R(n).getTime()!==R(i).getTime()?(alert("동일한 날에만 예약할 수 있습니다."),h(null)):n&&n>=i?(alert("예약 시간은 최소 1시간입니다."),h(null)):h(i)},B=(i,f,_)=>(a[i]||[]).find(N=>{const H=new Date(N.startTime),M=new Date(N.endTime);return f>=H&&f<M||_>H&&_<=M||f<=H&&_>=M}),F=()=>{if(!n||!c){alert("시작시간과 종료시간을 입력해주세요!");return}const i=JSON.parse(localStorage.getItem("currentUser")),f=i.id,_={courtName:e.name,userName:i.name,userPhone:i.phoneNumber,startTime:n.toISOString(),endTime:c.toISOString(),main_img:e.main_img},L=B(f,n,c);if(L){alert(`${i.name}님은 해당 시간대에 이미 ${L.courtName}에 예약이 되어있습니다.`);return}const N={...a,[f]:[...a[f]||[],_]};localStorage.setItem("reservation_data",JSON.stringify(N)),m(i.name),S(i.phoneNumber),D(!0)},q=()=>{window.location.reload()},k=[e.img1,e.img2,e.img3].filter(i=>i);return t.jsxs("div",{className:"CourtDetail",children:[t.jsx(se,{}),t.jsx("div",{className:"CourtDetail_header_2",children:t.jsx("h3",{children:e.name})}),t.jsxs("div",{className:`CourtDetail_main ${v?"blurred":""}`,children:[t.jsx("div",{className:"CourtDetail_main_slide",children:t.jsxs(V,{modules:[G,ae],spaceBetween:50,slidesPerView:1,onSlideChange:()=>console.log("slide change"),pagination:{clickable:!0},autoplay:{delay:3e3,disableOnInteraction:!1},navigation:k.length>1?{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}:!1,children:[k.map((i,f)=>t.jsx(Q,{children:t.jsx("img",{src:i,alt:`Image ${f+1}`})},f)),k.length>1&&t.jsxs("div",{className:"swiper-button_warp",children:[t.jsx("div",{className:"swiper-button-next next1",children:t.jsx("span",{class:"material-symbols-rounded",children:"swipe_left"})}),t.jsx("div",{className:"swiper-button-prev prev1",children:t.jsx("span",{class:"material-symbols-rounded",children:"swipe_left"})})]})]})}),t.jsxs("div",{className:"CourtDetail_main_warp",children:[t.jsxs("div",{className:"CourtDetail_main_box1",children:[t.jsx("h4",{children:e.name}),t.jsxs("p",{children:["주소 : ",e.address]})]}),t.jsx("button",{className:"CourtDetail_main_box2",onClick:l,children:"이 테니스장 예약하기"}),t.jsxs("div",{className:"CourtDetail_main_box3",children:[t.jsx("a",{className:"call",href:`tel:${e.call}`,children:t.jsx("span",{className:"material-symbols-rounded",children:"phone_forwarded"})}),t.jsx("h4",{children:"테니스장 정보"}),t.jsxs("ul",{children:[t.jsxs("li",{children:["이용시간 : ",e.time]}),t.jsxs("li",{children:["코트 종류 : ",e.coatType]}),t.jsxs("li",{children:["코트 수 : ",e.courtNumber]}),t.jsxs("li",{children:["가격 : ",e.price]})]})]}),t.jsxs("div",{className:"CourtDetail_main_box4",children:[t.jsx("h4",{children:"위치 정보"}),t.jsxs("ul",{children:[t.jsxs("li",{children:["테니스장 명 : ",e.name]}),t.jsxs("li",{children:["주소 : ",e.address]})]}),t.jsx(ne,{latitude:e.latitude,longitude:e.longitude})]})]})]}),t.jsxs("div",{className:`CourtDetail_main_reservation ${v?"open":""}`,children:[t.jsx("h4",{children:e.name}),t.jsx("p",{children:"예약 날짜와 시간을 선택하세요."}),t.jsxs("div",{className:"reservation_time",children:[t.jsxs("div",{className:"start_time",children:[t.jsx("span",{children:"시작 :"}),t.jsx(I,{selected:n,onChange:C,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:60,dateFormat:"yyyy/MM/dd HH:mm",timeCaption:"시간",minDate:new Date,maxDate:O(new Date,30),minTime:p,maxTime:j,selectsStart:!0,startDate:n,endDate:c,placeholderText:"날짜 및 시간 선택",onFocus:i=>i.target.blur()}),!n&&t.jsx("p",{children:"시작시간을 입력해주세요❗"})]}),t.jsxs("div",{className:"end_time",children:[t.jsx("span",{children:"종료 :"}),t.jsx(I,{selected:c,onChange:P,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:60,dateFormat:"yyyy/MM/dd HH:mm",timeCaption:"시간",minDate:n||new Date,maxDate:O(new Date,30),minTime:n?E():p,maxTime:j,selectsEnd:!0,startDate:n,endDate:c,placeholderText:"날짜 및 시간 선택"}),!c&&t.jsx("p",{children:"종료시간을 입력해주세요❗"})]})]}),t.jsx("button",{className:"reser_btn",onClick:F,children:"예약하기"}),t.jsx("span",{className:"material-symbols-rounded CourtDetail_main_reservation_close",onClick:o,children:"close"})]}),b&&t.jsxs("div",{className:"CourtDetail_main_reservation_suc",children:[t.jsx("img",{src:Z,alt:"reservation_check"}),t.jsxs("h4",{children:[d,"님 ",e.name,t.jsx("br",{}),"예약 완료되었습니다."]}),t.jsxs("div",{className:"reservation_suc_time",children:[t.jsx("span",{children:"예약시간"}),t.jsxs("p",{children:[T(new Date(n),"yyyy.MM.dd HH:mm")," ~ ",T(new Date(c),"HH:mm"),t.jsx("br",{})," ",t.jsxs("em",{children:["(",Math.abs(new Date(c)-new Date(n))/36e5,"시간)"]})]})]}),t.jsx("span",{class:"material-symbols-rounded cir_close",onClick:q,children:"cancel"})]}),t.jsx(Y,{})]})}export{ue as default};
